<!--
	Builds SceneJS

	Guava3D home:	http://www.scenejs.com
	Author: 	Lindsay S. Kay, 12/10/2009
-->
<project name="" basedir="." default="package">

    <property name="BUILD_MAJOR" value="0"/>
    <property name="BUILD_MINOR" value="2"/>
    <property name="BUILD_ID" value="5"/>

    <property name="DIST_DIR"
              location="${basedir}/dist"
              description="Distribution directory"/>

    <property name="SCENEJS_NAME"
              value="scenejs.${BUILD_MAJOR}.${BUILD_MINOR}.${BUILD_ID}.js"/>

    <property name="SRC_DIR"
              location="${basedir}/src"
              description="Source Folder"/>

    <property name="SCENEJS_DIST"
              location="${DIST_DIR}/${SCENEJS_NAME}"
              description="Website downloads directory"/>

    <property name="DOWNLOADS_DIST"
              location="${basedir}/website/downloads/${SCENEJS_NAME}"
              description="Website downloads directory"/>

    <target name="all" depends="package"/>

    <target name="package" description="Main SceneJS build">
        <mkdir dir="${DIST_DIR}"/>
        <echo message="Building ${SCENEJS_DIST}"/>
        <concat destfile="${SCENEJS_DIST}">

            <!-- core -->
            <fileset dir="${SRC_DIR}" includes="scenejs/core/core.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/core/node.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/core/graph.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/core/matrix.js"/>

            <!-- canvas -->
            <fileset dir="${SRC_DIR}" includes="scenejs/canvas/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/canvas/canvas.js"/>

            <!-- viewport -->
            <fileset dir="${SRC_DIR}" includes="scenejs/viewport/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/viewport/viewport.js"/>

            <!-- appearance -->
            <fileset dir="${SRC_DIR}" includes="scenejs/appearance/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/appearance/material.js"/>

            <!-- scope -->
            <fileset dir="${SRC_DIR}" includes="scenejs/scope/scope.js"/>

            <!-- generation -->
            <fileset dir="${SRC_DIR}" includes="scenejs/generation/generator.js"/>

            <!-- branching -->
            <fileset dir="${SRC_DIR}" includes="scenejs/branching/selector.js"/>

            <!-- geometry -->
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/geometry.js"/>

            <!-- transformation -->
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/lookat.js"/>

            <!-- projection -->
            <fileset dir="${SRC_DIR}" includes="scenejs/projection/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/projection/perspective.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/projection/frustum.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/projection/ortho.js"/>

            <!-- layer -->
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/layer.js"/>

            <!-- modelling -->
            <fileset dir="${SRC_DIR}" includes="scenejs/modelling/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/modelling/rotate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/modelling/translate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/modelling/scale.js"/>

            <!--  shading -->
            <fileset dir="${SRC_DIR}" includes="scenejs/shading/backendBase.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/shading/shader.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/shading/simple/simpleBackend.js"/>

            <!-- shaderVars -->
            <fileset dir="${SRC_DIR}" includes="scenejs/shaderVars/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/shaderVars/vars.js"/>

            <!-- lighting -->
            <fileset dir="${SRC_DIR}" includes="scenejs/lighting/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/lighting/lights.js"/>

            <!-- geometry -->
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/geometry.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/objects/teapot.js"/>

        </concat>
        <echo message="${SCENEJS_DIST} built."/>
        <copy tofile="${DOWNLOADS_DIST}" file="${SCENEJS_DIST}"/>
    </target>
</project>
