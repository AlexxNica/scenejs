<!--
	Builds SceneJS

	Guava3D home:	http://www.scenejs.com
	Author: 	Lindsay S. Kay, 12/10/2009
-->
<project name="" basedir="." default="package">

    <property name="BUILD_MAJOR" value="0"/>
    <property name="BUILD_MINOR" value="3"/>
    <property name="BUILD_ID" value="9"/>

    <property name="DIST_DIR"
              location="${basedir}/dist"
              description="Distribution directory"/>

    <property name="SCENEJS_NAME"
              value="scenejs.${BUILD_MAJOR}.${BUILD_MINOR}.${BUILD_ID}.js"/>


    <property name="LIB_DIR"
              location="${basedir}/lib"
              description="Lib Folder"/>

    <property name="SRC_DIR"
              location="${basedir}/src"
              description="Source Folder"/>

    <property name="SCENEJS_DIST"
              location="${DIST_DIR}/${SCENEJS_NAME}"
              description="Website downloads directory"/>

    <property name="DOWNLOADS_DIST"
              location="${basedir}/website/downloads/${SCENEJS_NAME}"
              description="Website downloads directory"/>

    <target name="all" depends="package"/>

    <target name="package" description="Main SceneJS build">
        <mkdir dir="${DIST_DIR}"/>
        <echo message="Building ${SCENEJS_DIST}"/>
        <concat fixlastline="yes" destfile="${SCENEJS_DIST}">
            
            <fileset dir="${basedir}" includes="license.txt"/>

            <fileset dir="${LIB_DIR}" includes="sylvester.js"/>
            <fileset dir="${LIB_DIR}" includes="glUtils.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/core/core.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/exceptions/exceptions.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/canvas/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/shading/backendBase.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/lighting/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/viewport/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/layering/backend.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/modelview/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/modelview/model/rotate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/modelview/model/translate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/modelview/model/scale.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/modelview/view/lookat.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/projection/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/projection/perspective.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/projection/ortho.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/transformation/projection/frustum.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/backend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/appearance/backend.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/core/node.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/core/scene.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/canvas/canvas.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/viewport/viewport.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/geometry.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/objects/teapot.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/geometry/objects/cube.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/layering/layer.js"/>


            <fileset dir="${SRC_DIR}" includes="scenejs/shading/shader.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/shading/simple/simpleBackend.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/lighting/lights.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/appearance/material.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/animation/scalarInterpolator.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scope/scope.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/generation/generator.js"/>
        </concat>
        <echo message="${SCENEJS_DIST} built."/>
        <copy tofile="${DOWNLOADS_DIST}" file="${SCENEJS_DIST}"/>
    </target>
</project>
