<!--
	Builds SceneJS

	Guava3D home:	http://www.scenejs.com
	Author: 	Lindsay S. Kay, 12/10/2009
-->
<project name="" basedir="." default="package">

    <property name="BUILD_MAJOR" value="0"/>
    <property name="BUILD_MINOR" value="2"/>
    <property name="BUILD_ID" value="5"/>

    <property name="DIST_DIR"
              location="${basedir}/dist"
              description="Folder for concatenated, min, lite and packed target"/>

    <property name="SCENEJS_DIST"
              location="${DIST_DIR}/scenejs.${BUILD_MAJOR}.${BUILD_MINOR}.${BUILD_ID}.js"/>

    <property name="SCENEJS_LATEST_DIST"
              location="${DIST_DIR}/scenejs.js"/>

    <property name="LIB_DIR"
              location="${basedir}/lib"
              description="Libraries Folder"/>

    <property name="SRC_DIR"
              location="${basedir}/src"
              description="Source Folder"/>

    <target name="all" depends="package"/>

    <target name="package"  description="Main Guava build">
        <mkdir dir="${DIST_DIR}"/>
        <!-- CORE -->
        <echo message="Building ${SCENEJS_DIST}"/>
        <concat destfile="${SCENEJS_DIST}">

            <!-- 3rd party libs -->

            <fileset dir="${LIB_DIR}" includes="lib/sylvester.js"/>
            <fileset dir="${LIB_DIR}" includes="lib/sylvester.ux.js"/>

            <!-- Core -->

            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/core.js"/>

            <!-- Back end-->

            <fileset dir="${SRC_DIR}" includes="scenejs/backend/backend.js"/>

            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/canvasTagWrapper.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/canvasBackend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/shaderBackend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/lightsBackend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/viewportBackend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/layerBackend.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/projectionBackends.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/transformBackends.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/backend/mozglweb20/geometryBackend.js"/>

            <!-- Graph API -->

            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/event.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/graphContext.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/nodeContext.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/node.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/frontend/frontend.js"/>

            <!-- Front end -->

            <fileset dir="${SRC_DIR}" includes="scenejs/scene/canvas.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/viewport.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/geometry.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/lookat.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/perspective.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/ortho.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/frustum.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/layer.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/rotate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/translate.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/scale.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/shader.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/lights.js"/>
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/shaders/blinn-phong-shader.js"/>
            
            <fileset dir="${SRC_DIR}" includes="scenejs/scene/ux/teapot.js"/>

        </concat>
        <echo message="${SCENEJS_DIST} built."/>
        <copy tofile="${SCENEJS_LATEST_DIST}" file="${SCENEJS_DIST}"/>
    </target>
</project>
