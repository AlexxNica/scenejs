<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="JsDoc Toolkit" />
		
		<title>JsDoc Reference - SceneJS.Socket</title>

		<style type="text/css">
			/* default.css */
body
{
	font: 12px "Lucida Grande", Tahoma, Arial, Helvetica, sans-serif;
	width: 800px;
}

.header
{
	clear: both;
	background-color: #ccc;
	padding: 8px;
}

h1
{
	font-size: 150%;
	font-weight: bold;
	padding: 0;
	margin: 1em 0 0 .3em;
}

hr
{
	border: none 0;
	border-top: 1px solid #7F8FB1;
	height: 1px;
}

pre.code
{
	display: block;
	padding: 8px;
	border: 1px dashed #ccc;
}

#index
{
	margin-top: 24px;
	float: left;
	width: 160px;
	position: absolute;
	left: 8px;
	background-color: #F3F3F3;
	padding: 8px;
}

#content
{
	margin-left: 190px;
	width: 600px;
}

.classList
{
	list-style-type: none;
	padding: 0;
	margin: 0 0 0 8px;
	font-family: arial, sans-serif;
	font-size: 1em;
	overflow: auto;
}

.classList li
{
	padding: 0;
	margin: 0 0 8px 0;
}

.summaryTable { width: 100%; }

h1.classTitle
{
	font-size:170%;
	line-height:130%;
}

h2 { font-size: 110%; }
caption, div.sectionTitle
{
	background-color: #7F8FB1;
	color: #fff;
	font-size:130%;
	text-align: left;
	padding: 2px 6px 2px 6px;
	border: 1px #7F8FB1 solid;
}

div.sectionTitle { margin-bottom: 8px; }
.summaryTable thead { display: none; }

.summaryTable td
{
	vertical-align: top;
	padding: 4px;
	border-bottom: 1px #7F8FB1 solid;
	border-right: 1px #7F8FB1 solid;
}

/*col#summaryAttributes {}*/
.summaryTable td.attributes
{
	border-left: 1px #7F8FB1 solid;
	width: 140px;
	text-align: right;
}

td.attributes, .fixedFont
{
	line-height: 15px;
	color: #002EBE;
	font-family: "Courier New",Courier,monospace;
	font-size: 13px;
}

.summaryTable td.nameDescription
{
	text-align: left;
	font-size: 13px;
	line-height: 15px;
}

.summaryTable td.nameDescription, .description
{
	line-height: 15px;
	padding: 4px;
	padding-left: 4px;
}

.summaryTable { margin-bottom: 8px; }

ul.inheritsList
{
	list-style: square;
	margin-left: 20px;
	padding-left: 0;
}

.detailList {
	margin-left: 20px; 
	line-height: 15px;
}
.detailList dt { margin-left: 20px; }

.detailList .heading
{
	font-weight: bold;
	padding-bottom: 6px;
	margin-left: 0;
}

.light, td.attributes, .light a:link, .light a:visited
{
	color: #777;
	font-style: italic;
}

.fineprint
{
	text-align: right;
	font-size: 10px;
}
		</style>
	</head>

	<body>
<!-- ============================== header ================================= -->	
		<!-- begin static/header.html -->
		<div id="header">
</div>
		<!-- end static/header.html -->

<!-- ============================== classes index ============================ -->
		<div id="index">
			<!-- begin publish.classesIndex -->
			<div align="center"><a href="../index.html">Class Index</a>
| <a href="../files.html">File Index</a></div>
<hr />
<h2>Classes</h2>
<ul class="classList">
	
	<li><i><a href="../symbols/_global_.html">_global_</a></i></li>
	
	<li><a href="../symbols/SceneJS.html">SceneJS</a></li>
	
	<li><a href="../symbols/SceneJS.BoundingBox.html">SceneJS.BoundingBox</a></li>
	
	<li><a href="../symbols/SceneJS.Camera.html">SceneJS.Camera</a></li>
	
	<li><a href="../symbols/SceneJS.Data.html">SceneJS.Data</a></li>
	
	<li><a href="../symbols/SceneJS.errors.CanvasNotFoundException.html">SceneJS.errors.CanvasNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.DataExpectedException.html">SceneJS.errors.DataExpectedException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.DocumentElementNotFoundException.html">SceneJS.errors.DocumentElementNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.Exception.html">SceneJS.errors.Exception</a></li>
	
	<li><a href="../symbols/SceneJS.errors.InternalException.html">SceneJS.errors.InternalException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.InvalidNodeConfigException.html">SceneJS.errors.InvalidNodeConfigException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.InvalidSceneGraphException.html">SceneJS.errors.InvalidSceneGraphException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.ModuleInstallFailureException.html">SceneJS.errors.ModuleInstallFailureException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.ModuleLoadTimeoutException.html">SceneJS.errors.ModuleLoadTimeoutException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.ModuleNotFoundException.html">SceneJS.errors.ModuleNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.NodeConfigExpectedException.html">SceneJS.errors.NodeConfigExpectedException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.OutOfVRAMException.html">SceneJS.errors.OutOfVRAMException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.SocketErrorException.html">SceneJS.errors.SocketErrorException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.SocketNotSupportedException.html">SceneJS.errors.SocketNotSupportedException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.SocketServerErrorException.html">SceneJS.errors.SocketServerErrorException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.SymbolNotFoundException.html">SceneJS.errors.SymbolNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.WebGLNotSupportedException.html">SceneJS.errors.WebGLNotSupportedException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.WebGLUnsupportedNodeConfigException.html">SceneJS.errors.WebGLUnsupportedNodeConfigException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.WithConfigsNodeNotFoundException.html">SceneJS.errors.WithConfigsNodeNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.errors.WithConfigsPropertyNotFoundException.html">SceneJS.errors.WithConfigsPropertyNotFoundException</a></li>
	
	<li><a href="../symbols/SceneJS.Fog.html">SceneJS.Fog</a></li>
	
	<li><a href="../symbols/SceneJS.Generator.html">SceneJS.Generator</a></li>
	
	<li><a href="../symbols/SceneJS.Geometry.html">SceneJS.Geometry</a></li>
	
	<li><a href="../symbols/SceneJS.Instance.html">SceneJS.Instance</a></li>
	
	<li><a href="../symbols/SceneJS.Interpolator.html">SceneJS.Interpolator</a></li>
	
	<li><a href="../symbols/SceneJS.Inverse.html">SceneJS.Inverse</a></li>
	
	<li><a href="../symbols/SceneJS.Lights.html">SceneJS.Lights</a></li>
	
	<li><a href="../symbols/SceneJS.LightSource.html">SceneJS.LightSource</a></li>
	
	<li><a href="../symbols/SceneJS.Locality.html">SceneJS.Locality</a></li>
	
	<li><a href="../symbols/SceneJS.LookAt.html">SceneJS.LookAt</a></li>
	
	<li><a href="../symbols/SceneJS.Material.html">SceneJS.Material</a></li>
	
	<li><a href="../symbols/SceneJS.Matrix.html">SceneJS.Matrix</a></li>
	
	<li><a href="../symbols/SceneJS.Node.html">SceneJS.Node</a></li>
	
	<li><a href="../symbols/SceneJS.objects.Cube.html">SceneJS.objects.Cube</a></li>
	
	<li><a href="../symbols/SceneJS.objects.Sphere.html">SceneJS.objects.Sphere</a></li>
	
	<li><a href="../symbols/SceneJS.objects.Teapot.html">SceneJS.objects.Teapot</a></li>
	
	<li><a href="../symbols/SceneJS.Quaternion.html">SceneJS.Quaternion</a></li>
	
	<li><a href="../symbols/SceneJS.Renderer.html">SceneJS.Renderer</a></li>
	
	<li><a href="../symbols/SceneJS.Rotate.html">SceneJS.Rotate</a></li>
	
	<li><a href="../symbols/SceneJS.Scale.html">SceneJS.Scale</a></li>
	
	<li><a href="../symbols/SceneJS.Scene.html">SceneJS.Scene</a></li>
	
	<li><a href="../symbols/SceneJS.Selector.html">SceneJS.Selector</a></li>
	
	<li><a href="../symbols/SceneJS.Socket.html">SceneJS.Socket</a></li>
	
	<li><a href="../symbols/SceneJS.Stationary.html">SceneJS.Stationary</a></li>
	
	<li><a href="../symbols/SceneJS.Symbol.html">SceneJS.Symbol</a></li>
	
	<li><a href="../symbols/SceneJS.Text.html">SceneJS.Text</a></li>
	
	<li><a href="../symbols/SceneJS.Texture.html">SceneJS.Texture</a></li>
	
	<li><a href="../symbols/SceneJS.TextureLayer.html">SceneJS.TextureLayer</a></li>
	
	<li><a href="../symbols/SceneJS.Translate.html">SceneJS.Translate</a></li>
	
	<li><a href="../symbols/SceneJS.WithConfigs.html">SceneJS.WithConfigs</a></li>
	
	<li><a href="../symbols/SceneJS.WithData.html">SceneJS.WithData</a></li>
	
</ul>
<hr />
			<!-- end publish.classesIndex -->
		</div>
		
		<div id="content">
<!-- ============================== class title ============================ -->
			<h1 class="classTitle">
				
				Class SceneJS.Socket
			</h1>

<!-- ============================== class summary ========================== -->			
			<p class="description">
				
				
			
				Binds its subgraph to a WebSocket, providing a server with the ability to add, remove and manipulate content within the subgraph

<p>The SceneJS.Socket node enables a server to dynamically participate in the construction, destruction and
configuration of its subgraph. It binds the subgraph to a WebSocket through which it exchanges JSON message objects
with a server.</p>

<h2>Message Format</h2>
<p>Incoming messages from a server are either error responses, like that shown below, or configuration maps
exactly like those specified with a <a href="../symbols/SceneJS.WithConfigs.html">SceneJS.WithConfigs</a>. On receipt of a configuration map, a Socket
automatically applies the map to its subgraph in the same way that a <a href="../symbols/SceneJS.WithConfigs.html">SceneJS.WithConfigs</a> does.</p>
<p>An error response object has two parts: the error code, either a string or number, and a message.</p>
<p>Below is an example of an HTTP 404 error response:</p>
<pre><code>
{
    error : 404,
    body  : "Could not find asset 'foobar'
}
</code></pre>


<p>The outgoing message format is not part of the SceneJS specification and is whatever JSON objects the server on
the other end expects.</p>

<h2>Message Queues</h2>
<p>Messages can be configured on the Socket to send when the connection first opens, or enqueued at any
time with <a href="#addMessage">#addMessage</a> to send when the socket is next rendered while a connection is open.</p>

<p>Incoming messages are also queued - each time the Socket is rendered while a connection is open, it dequeues and
processes the next incoming message before sending all queued outgoing messages.</p>

<p>You can have multiple Sockets scattered throughout a scene graph, and may even nest them. This enables you to do some
fancy things, like have "live assets" that are controlled by the servers that they are downloaded from. Imagine a
subgraph defining an airplane, that relies on its server to manage its complex physics computations, for example.</p>

 <p><b>Example Usage</b></p><p>Below is a Socket that connects to a server on the local host. The Socket starts off
in <a href="#STATE_INITIAL">#STATE_INITIAL</a>. Then as soon as it is rendered, it transitions to <a href="#STATE_CONNECTING">#STATE_CONNECTING</a> and tries to
open the connection. When successful, it sends the optional specified messages and transitions to <a href="#STATE_OPENED">#STATE_OPENED</a>.
The server may respond with an error (described further below) or a configuration map. If the response is a
configuration map, the Socket would then apply that to its sub-nodes.
On error, the Socket will transition to <a href="#STATE_ERROR">#STATE_ERROR</a> and remain in that state, with connection closed. If
the connection ever closes, the Socket will attempt to re-open it when next rendered.</p> 
<pre><code>
new SceneJS.Socket({

      // Location of server

      uri: "ws://127.0.0.1:8888/",

      // Messages to send as soon as the socket is first opened

      messages: [
         {
              myParam  : "foo",
              myParam2 : "bar"
         },

         // Next message ...

     ],

     listeners: {
        "state-changed" : {
             fn: function(theNode, params) {
                 switch (params.newState) {
                     case SceneJS.Socket.STATE_CONNECTING:

                         // Socket attempting to open connection with server at specified URI

                         alert("STATE_CONNECTING");
                         break;

                     case SceneJS.Socket.STATE_OPEN:

                         // Server connection opened, messages sent

                         alert("STATE_OPEN");
                         break;

                     case SceneJS.Socket.STATE_CLOSED:

                         // Connection closed OK

                         alert("STATE_CLOSED");
                         break;

                     case SceneJS.Socket.STATE_ERROR:

                         // Error opening connection, or server error response

                         alert("STATE_ERROR: " + params.exception.message);
                         break;
                  }
              }
          }
      },

      // Child nodes that will receive configs returned by socket's server peer
)

</code></pre>
				
				
					<br /><i>Defined in: </i> <a href="../symbols/src/_home_lindsay_xeolabs_projects_scenejs_src_scenejs_socket_socket.js.html">socket.js</a>.
				
			</p>

<!-- ============================== constructor summary ==================== -->			
			
			<table class="summaryTable" cellspacing="0" summary="A summary of the constructor documented in the class SceneJS.Socket.">
				<caption>Class Summary</caption>
				<thead>
					<tr>
						<th scope="col">Constructor Attributes</th>
						<th scope="col">Constructor Name and Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="attributes">&nbsp;</td>
						<td class="nameDescription" >
							<div class="fixedFont">
								<b><a href="../symbols/SceneJS.Socket.html#constructor">SceneJS.Socket</a></b>()
							</div>
							<div class="description"></div>
						</td>
					</tr>
				</tbody>
			</table>
			

<!-- ============================== properties summary ===================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the fields documented in the class SceneJS.Socket.">
					<caption>Field Summary</caption>
					<thead>
						<tr>
							<th scope="col">Field Attributes</th>
							<th scope="col">Field Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								SceneJS.Socket.<b><a href="../symbols/SceneJS.Socket.html#.STATE_CLOSED">STATE_CLOSED</a></b>
								</div>
								<div class="description">State of Socket in which connection is closed.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								SceneJS.Socket.<b><a href="../symbols/SceneJS.Socket.html#.STATE_CONNECTING">STATE_CONNECTING</a></b>
								</div>
								<div class="description">State of Socket when it has attempted to open a connection with a server and awaiting response.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								SceneJS.Socket.<b><a href="../symbols/SceneJS.Socket.html#.STATE_ERROR">STATE_ERROR</a></b>
								</div>
								<div class="description">State of Socket in which an error occured, either due to failure to open connection, or as signalled by the server.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								SceneJS.Socket.<b><a href="../symbols/SceneJS.Socket.html#.STATE_INITIAL">STATE_INITIAL</a></b>
								</div>
								<div class="description">Initial state of Socket when not rendered yet.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&lt;static&gt; &nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont">
								SceneJS.Socket.<b><a href="../symbols/SceneJS.Socket.html#.STATE_OPEN">STATE_OPEN</a></b>
								</div>
								<div class="description">State of Socket when connection is open with server.</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			

<!-- ============================== methods summary ======================== -->
			
				
				
				<table class="summaryTable" cellspacing="0" summary="A summary of the methods documented in the class SceneJS.Socket.">
					<caption>Method Summary</caption>
					<thead>
						<tr>
							<th scope="col">Method Attributes</th>
							<th scope="col">Method Name and Description</th>
						</tr>
					</thead>
					<tbody>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/SceneJS.Socket.html#addMessage">addMessage</a></b>(message)
								</div>
								<div class="description">Enqeues an outgoing message to send when the Socket is next rendered while a connection is open.</div>
							</td>
						</tr>
					
						<tr>
							<td class="attributes">&nbsp;</td>
							<td class="nameDescription">
								<div class="fixedFont"><b><a href="../symbols/SceneJS.Socket.html#removeMessages">removeMessages</a></b>()
								</div>
								<div class="description">Clears outgoing message queue - messages are not sent.</div>
							</td>
						</tr>
					
					</tbody>
				</table>
				
				
				
			
<!-- ============================== events summary ======================== -->
			

<!-- ============================== constructor details ==================== -->		
			
			<div class="details"><a name="constructor"> </a>
				<div class="sectionTitle">
					Class Detail
				</div>
				
				<div class="fixedFont">
						<b>SceneJS.Socket</b>()
				</div>
				
				<div class="description">
					
					
				</div>
				
				
				
				
					
					
					
					
					
					
					

			</div>
			

<!-- ============================== field details ========================== -->		
			
				<div class="sectionTitle">
					Field Detail
				</div>
				
					<a name=".STATE_CLOSED"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">SceneJS.Socket.</span><b>STATE_CLOSED</b>
					
					</div>
					<div class="description">
						State of Socket in which connection is closed. From here it will attempt to r-open when next rendered.
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name=".STATE_CONNECTING"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">SceneJS.Socket.</span><b>STATE_CONNECTING</b>
					
					</div>
					<div class="description">
						State of Socket when it has attempted to open a connection with a server and awaiting response. Socket tries to open
the connection as soon as it is rendered and enters this state.
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name=".STATE_ERROR"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">SceneJS.Socket.</span><b>STATE_ERROR</b>
					
					</div>
					<div class="description">
						State of Socket in which an error occured, either due to failure to open connection, or as signalled by the server.
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name=".STATE_INITIAL"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">SceneJS.Socket.</span><b>STATE_INITIAL</b>
					
					</div>
					<div class="description">
						Initial state of Socket when not rendered yet.
						
						
					</div>
					
					

						
						
						
						

					<hr />
				
					<a name=".STATE_OPEN"> </a>
					<div class="fixedFont">&lt;static&gt; 
					
					
					<span class="light">SceneJS.Socket.</span><b>STATE_OPEN</b>
					
					</div>
					<div class="description">
						State of Socket when connection is open with server.
						
						
					</div>
					
					

						
						
						
						

					
				
			

<!-- ============================== method details ========================= -->		
			
				<div class="sectionTitle">
					Method Detail
				</div>
				
					<a name="addMessage"> </a>
					<div class="fixedFont">
					
					<span class="light">{this}</span>
					<b>addMessage</b>(message)
					
					</div>
					<div class="description">
						Enqeues an outgoing message to send when the Socket is next rendered while a connection is open.
						
						
					</div>
					
					
					
						
							<dl class="detailList">
							<dt class="heading">Parameters:</dt>
							
								<dt>
									<b>message</b>
									
								</dt>
								<dd></dd>
							
							</dl>
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{this}</span> </dd>
							
							</dl>
						
						
						

					<hr />
				
					<a name="removeMessages"> </a>
					<div class="fixedFont">
					
					<span class="light">{this}</span>
					<b>removeMessages</b>()
					
					</div>
					<div class="description">
						Clears outgoing message queue - messages are not sent.
						
						
					</div>
					
					
					
						
						
						
						
						
							<dl class="detailList">
							<dt class="heading">Returns:</dt>
							
								<dd><span class="light fixedFont">{this}</span> </dd>
							
							</dl>
						
						
						

					
				
			
			
<!-- ============================== event details ========================= -->		
			
			
			<hr />
		</div>

		
<!-- ============================== footer ================================= -->
		<div class="fineprint" style="clear:both">
			
			Documentation generated by <a href="http://code.google.com/p/jsdoc-toolkit/" target="_blank">JsDoc Toolkit</a> 2.3.2 on Sun Jul 18 2010 20:37:08 GMT+1200 (NZST)
		</div>
	</body>
</html>
