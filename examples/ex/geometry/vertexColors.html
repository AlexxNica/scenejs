<!DOCTYPE html>
<html lang="en">
<head>
    <title>SceneJS V3 Custom Geometry with Vertex Colors</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

</head>
<body>

<script src="../../../build/latest/scenejs.js"></script>

<!-- Utility to bind mouse to example scenes -->
<script src="../../libs/example-support-utils.js"></script>


<script>

var scene = SceneJS.createScene({

    nodes:[
        {
            type:"lookAt",
            eye:{ z:5 },

            nodes:[
                {
                    type:"rotate",
                    id:"pitch",
                    angle:0.0,
                    x:1.0,

                    nodes:[

                        {
                            type:"rotate",
                            id:"yaw",
                            angle:0.0,
                            y:1.0,

                            nodes:[
                                {
                                    type:"texture",
                                    layers:[
                                        {
                                            uri:"../../textures/BrickWall.jpg",

                                            /* Texture scale factors
                                             */
                                            scale:{
                                                x:.1,
                                                y:.05
                                            }
                                        }
                                    ],

                                    nodes:[

                                        /* Geometry node which defines our custom object, a simple cube.
                                         */
                                        {

                                            type:"geometry",

                                            /* Optional coreID, must be unique among all
                                             * geometries - if another geometry has already
                                             * been defined with that core ID, then that
                                             * geometry will be instanced here in place of
                                             * this one, and this geometry definition will be
                                             * ignored.
                                             */
                                            coreId:"my-geometry",

                                            /* The primitive type - allowed values are
                                             * "points", "lines", "line-loop", "line-strip",
                                             * "triangles", "triangle-strip" and "triangle-fan".
                                             *
                                             * Try setting this config to these different
                                             * types, it's quite freaky.
                                             *
                                             * See the OpenGL/WebGL specification docs for
                                             * how the coordinate arrays are supposed to be laid out
                                             * for them.
                                             */
                                            primitive:"triangles",

                                            /* The vertices - eight for our cube, each
                                             * one spanning three array elements for X,Y and Z
                                             */
                                            positions:[

                                                /* v0-v1-v2-v3 front
                                                 */
                                                1, 1, 1,
                                                -1, 1, 1,
                                                -1, -1, 1,
                                                1, -1, 1,

                                                /* v0-v3-v4-v1 right
                                                 */
                                                1, 1, 1,
                                                1, -1, 1,
                                                1, -1, -1,
                                                1, 1, -1,

                                                /* v0-v1-v6-v1 top
                                                 */
                                                1, 1, 1,
                                                1, 1, -1,
                                                -1, 1, -1,
                                                -1, 1, 1,

                                                /* v1-v6-v7-v2 left
                                                 */
                                                -1, 1, 1,
                                                -1, 1, -1,
                                                -1, -1, -1,
                                                -1, -1, 1,

                                                /* v7-v4-v3-v2 bottom
                                                 */
                                                -1, -1, -1,
                                                1, -1, -1,
                                                1, -1, 1,
                                                -1, -1, 1,

                                                /* v4-v7-v6-v1 back
                                                 */
                                                1, -1, -1,
                                                -1, -1, -1,
                                                -1, 1, -1,
                                                1, 1, -1
                                            ],

                                            /* Normal vectors, one for each vertex
                                             */
                                            normals:[

                                                /* v0-v1-v2-v3 front
                                                 */
                                                0, 0, 1,
                                                0, 0, 1,
                                                0, 0, 1,
                                                0, 0, 1,

                                                /* v0-v3-v4-v5 right
                                                 */
                                                1, 0, 0,
                                                1, 0, 0,
                                                1, 0, 0,
                                                1, 0, 0,

                                                /* v0-v5-v6-v1 top
                                                 */
                                                0, 1, 0,
                                                0, 1, 0,
                                                0, 1, 0,
                                                0, 1, 0,

                                                /* v1-v6-v7-v2 left
                                                 */
                                                -1, 0, 0,
                                                -1, 0, 0,
                                                -1, 0, 0,
                                                -1, 0, 0,

                                                /* v7-v4-v3-v2 bottom
                                                 */
                                                0, -1, 0,
                                                0, -1, 0,
                                                0, -1, 0,
                                                0, -1, 0,

                                                /* v4-v7-v6-v5 back
                                                 */
                                                0, 0, -1,
                                                0, 0, -1,
                                                0, 0, -1,
                                                0, 0, -1
                                            ],

                                            /* 2D texture coordinates corresponding to the
                                             * 3D positions defined above - eight for our cube, each
                                             * one spaining two array elements for X and Y
                                             */
                                            uv:[

                                                /* v0-v1-v2-v3 front
                                                 */
                                                5, 5,
                                                0, 5,
                                                0, 0,
                                                5, 0,

                                                /* v0-v3-v4-v5 right
                                                 */
                                                0, 5,
                                                0, 0,
                                                5, 0,
                                                5, 5,

                                                /* v0-v5-v6-v1 top
                                                 */
                                                5, 0,
                                                5, 5,
                                                0, 5,
                                                0, 0,

                                                /* v1-v6-v7-v2 left
                                                 */
                                                5, 5,
                                                0, 5,
                                                0, 0,
                                                5, 0,

                                                /* v7-v4-v3-v2 bottom
                                                 */
                                                0, 0,
                                                5, 0,
                                                5, 5,
                                                0, 5,

                                                /* v4-v7-v6-v5 back
                                                 */
                                                0, 0,
                                                5, 0,
                                                5, 5,
                                                0, 5
                                            ],

                                            /* Color for each vertes
                                             */
                                            colors:[

                                                /* v0-v1-v2-v3 front
                                                 */
                                                1.0, 0.0, 0.0, 1.5,
                                                0.0, 1.0, 0.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,

                                                /* v0-v3-v4-v5 right
                                                 */
                                                1.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,

                                                /* v0-v5-v6-v1 top
                                                 */
                                                1.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,

                                                /* v1-v6-v7-v2 left
                                                 */
                                                1.0, 0.0, 0.0, 1.0,
                                                1.0, 1.0, 0.0, 1.0,
                                                0.0, 0.0, 0.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,

                                                /* v7-v4-v3-v2 bottom
                                                 */
                                                0.0, 0.0, 0.0, 1.0,
                                                1.0, 0.0, 1.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,
                                                0.0, 0.0, 1.0, 1.0,

                                                /* v4-v7-v6-v5 back
                                                 */
                                                1.0, 0.0, 1.0, 1.0,
                                                0.0, 1.0, 1.0, 1.0,
                                                1.0, 1.0, 0.0, 1.0,
                                                1.0, 1.0, 1.0, 1.0
                                            ],

                                            /* Indices - these organise the
                                             * positions and uv texture coordinates
                                             * into geometric primitives in accordance
                                             * with the "primitive" parameter,
                                             * in this case a set of three indices
                                             * for each triangle.
                                             *
                                             * Note that each triangle is specified
                                             * in counter-clockwise winding order.
                                             *
                                             * You can specify them in clockwise
                                             * order if you configure the SceneJS.State
                                             * node's frontFace property as "cw", instead of
                                             * the default "ccw".
                                             */
                                            indices:[
                                                0, 1, 2,
                                                0, 2, 3,
                                                // front
                                                4, 5, 6,
                                                4, 6, 7,
                                                // right
                                                8, 9, 10,
                                                8, 10, 11,
                                                // top
                                                12, 13, 14,
                                                12, 14, 15,
                                                // left
                                                16, 17, 18,
                                                16, 18, 19,
                                                // bottom
                                                20, 21, 22,
                                                20, 22, 23

                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
});

mouseOrbitUtility(scene);


</script>
</body>
</html>