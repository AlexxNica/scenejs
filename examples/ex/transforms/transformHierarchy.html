<!DOCTYPE html>
<html lang="en">
<head>
    <title>SceneJS V3 Basic Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
</head>
<body>

<script src="../../../build/latest/scenejs.js"></script>

<script src="../../../build/latest/extras/controls/orbit.js"></script>

<script>

// Example of a SceneJS modelling transform hierarchy
//
// - Transforms can be nested in any combination.
// - There is no limit on hierarchy depth.
// - Transform hierarchies are baked into a single modelling matrix for each geometry, so there is no render-time
//   performance penalty for deep hierarchies. They are efficiently re-baked as required when you update their
//   properties (angle, scale factors etc).

var scene = SceneJS.createScene({
    nodes:[

        // Table
        {
            type:"translate",
            x:0, y:0, z:0,
            nodes:[
                // Table leg #1
                {
                    type:"translate",
                    x:-2.0,
                    y:0.0,
                    z:-2.0,
                    nodes:[
                        {
                            type:"scale",
                            x:0.2, y:1.0, z:0.2,
                            nodes:[
                                // Materials can appear anywhere in the hierarchy
                                {
                                    type:"material",
                                    color:{ r:1.0, g:0.4, b:0.4 },

                                    nodes:[
                                        // Leaf nodes are usually a geometry
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"box"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Table leg #2
                {
                    type:"translate",
                    x:2.0,
                    y:0.0,
                    z:-2.0,
                    nodes:[
                        {
                            type:"scale",
                            x:0.2, y:1.0, z:0.2,
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.4, g:0.6, b:0.4 },

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"box"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Table leg #3
                {
                    type:"translate",
                    x:2.0,
                    y:0.0,
                    z:2.0,
                    nodes:[
                        {
                            type:"scale",
                            x:0.2, y:1.0, z:0.2,
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.4, g:0.4, b:0.6 },

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"box"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Table leg #4
                {
                    type:"translate",
                    x:-2.0,
                    y:0.0,
                    z:2.0,
                    nodes:[
                        {
                            type:"scale",
                            x:0.2, y:1.0, z:0.2,
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.6, g:0.4, b:0.6 },

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"box"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Table top
                {
                    type:"translate",
                    x:0.0,
                    y:1.2,
                    z:0.0,
                    nodes:[
                        {
                            type:"scale",
                            x:2.7, y:0.2, z:2.7,
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.6, g:0.6, b:0.4 },

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"box"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        // Stack of rings sitting on the table
        {
            type:"translate",
            x:-1.1, y:2.3, z:-1.1,
            nodes:[
                // Blue torus
                {
                    type:"translate",
                    y:0.8, x:0.2, z:0.2,
                    nodes:[
                        {
                            type:"rotate",
                            x:1, angle:90,
                            nodes:[
                                {
                                    type:"scale",
                                    x:0.6, y:0.6, z:0.6,
                                    nodes:[
                                        {
                                            type:"material",
                                            color:{ r:0.5, g:0.5, b:0.6 },

                                            nodes:[
                                                {
                                                    type:"geometry",
                                                    source:{
                                                        type:"torus"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Pink torus
                {
                    type:"translate",
                    y:0.42, x:0.2, z:0.3,
                    nodes:[
                        {
                            type:"rotate",
                            x:1, angle:90,
                            nodes:[
                                {
                                    type:"scale",
                                    x:0.7, y:0.7, z:0.7,
                                    nodes:[
                                        {
                                            type:"material",
                                            color:{ r:0.7, g:0.5, b:0.5 },

                                            nodes:[
                                                {
                                                    type:"geometry",
                                                    source:{
                                                        type:"torus"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Green torus
                {
                    type:"translate",
                    y:-0.055,
                    nodes:[
                        {
                            type:"rotate",
                            x:1, angle:90,
                            nodes:[
                                {
                                    type:"scale",
                                    x:0.8, y:0.8, z:0.8,
                                    nodes:[
                                        {
                                            type:"material",
                                            color:{ r:0.5, g:0.7, b:0.5 },

                                            nodes:[
                                                {
                                                    type:"geometry",
                                                    source:{
                                                        type:"torus"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                // Yellow torus
                {
                    type:"translate",
                    y:-0.6,
                    nodes:[
                        {
                            type:"rotate",
                            x:1, angle:90,
                            nodes:[
                                {
                                    type:"scale",
                                    x:0.9, y:0.9, z:0.9,
                                    nodes:[
                                        {
                                            type:"material",
                                            color:{ r:0.7, g:0.7, b:0.5 },

                                            nodes:[
                                                {
                                                    type:"geometry",
                                                    source:{
                                                        type:"torus"
                                                    }
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },

        // Teapot
        {
            type:"translate",
            y:1.4,
            x:1.0,
            z:1.0,
            nodes:[
                { type:"rotate",
                    y:1,
                    angle:40,
                    nodes:[
                        {
                            type:"scale",
                            x:0.6, y:0.7, z:0.6,
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.6, g:0.7, b:0.6 },

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"teapot"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        },

        // Transparent sphere
        {
            type:"translate",
            y:2.0,
            x:-1.4,
            z:1.4,
            nodes:[
                {
                    type:"scale",
                    x:0.3, y:0.3, z:0.3,
                    nodes:[
                        {
                            type:"flags",
                            flags:{ transparent:true },
                            nodes:[
                                {
                                    type:"material",
                                    color:{ r:0.4, g:0.5, b:0.4 },
                                    alpha:0.6,

                                    nodes:[
                                        {
                                            type:"geometry",
                                            source:{
                                                type:"sphere"
                                            }
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
});

new SceneJS.OrbitControls(scene, {
    yaw:30,
    pitch:-30
});

</script>
</body>
</html>