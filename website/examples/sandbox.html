<html>

<head>
    <title>SceneJS Playroom</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="Content-Style-Type" content="text/css"/>

    <link href="../css/style.css" rel="stylesheet" type="text/css"/>
    <link href="../css/layout.css" rel="stylesheet" type="text/css"/>
    <link href="css/style.css" rel="stylesheet" type="text/css"/>

    <script src="js/codemirror/codemirror.js" type="text/javascript"></script>
    <script src="js/codemirror/mirrorframe.js" type="text/javascript"></script>
    <script src="js/ajax-object.js" type="text/javascript"></script>
    <script src="js/querystring.js" type="text/javascript"></script>
    <script src="../downloads/scenejs.0.2.5.js" type="text/javascript"></script>
</head>

<body id="about">

<div id="main">
    <div id="header">
        <a href="../index.html"><img src="../images/scenejs_small.png" id="logo" alt=""/></a>
        <ul id="menu">
            <li><a href="../downloads/downloads.html"><span><span>Download</span></span></a></li>
            <li id="menu-act"><a href="examples.html"><span><span>Examples</span></span></a></li>
            <li><a href="http://github.com/xeolabs/scenejs/issues"><span><span>Issues</span></span></a></li>
            <li><a href="http://scenejs.bbster.net/"><span><span>Forum</span></span></a></li>
            <li><a href="http://github.com/xeolabs/scenejs"><span><span>Sourcecode</span></span></a></li>
        </ul>
        <div id="headerContent">
            <div id="headerContentContainer">
                <p><span>This is an editable live example from the <a
                        href="examples.html">Examples</a> gallery.
                    Go ahead, edit the source code and re-run it.<br/>Just make sure you don't mess up its <b>canvas</b> node -
                    it needs that in order to render to the WebGL Canvas in this page.</span>
                </p>
            </div>
        </div>
    </div>

    <div id="content">
        <div class="row-1">
            <div class="examples-index">
                <div id="description" class="sandbox-description">Loading description...</div>
                <br/>
                <table class="sandbox-main">
                    <tr>
                        <td class="col1">

                            <input class="sandbox-button" type="button" value="Run"
                                   onclick="javascript:SandBox.execute()"/>
                            <input class="sandbox-button" type="button" value="Re-indent"
                                   onclick="javascript:SandBox.reindent()"/>
                            <input type="button" class="sandbox-button" value="Reset"
                                   onclick="javascript:SandBox.reset()"/>

                            <div class="source">
                                <textarea id="code">

                                </textarea>
                            </div>
                        </td>

                        <td class="col2">
                            <div id="output">
                            </div>
                            <div class="help">
                                <br/>

                                <div class="what-is-this-heading">Help</div>
                                <p>
                                    <span>This is a live demo of a SceneJS scene graph that you can tweak.</span>
                                </p>
                                <br/>

                                <p><span>Go ahead - type some edits in the scene definition to the left, then
                        <a href="Javascript:SandBox.execute()">run</a> it to
                          see what happens in the canvas above.</span></p>
                                <br/>

                                <p><span>There's just one catch: don't change the definition's SceneJS.canvas element, which
                        locates the canvas by its 'myCanvas' ID.</span></p>
                                <br/>

                                <p><span>If the definition layout gets messy, you can <a
                                        href="Javascript:SandBox.reindent()">re-indent</a> it.</span></p>
                                <br/>

                                <p><span>Start small - maybe just change a few numbers slightly to begin with. If you break the
                        definition completely, you can always <a href="Javascript:SandBox.reset()">reset</a> it.</span>
                                </p>
                            </div>
                        </td>
                    </tr>
                </table>

                <script type="text/javascript">
                    /* Load scene and description
                     */
                    String.prototype.trim = function () {
                        return this.replace(/^\s*/, '').replace(/\s*$/, '');
                    };
                    var qs = new Querystring();
                    var exampleName = qs.params['example'];
                    if (!exampleName) {
                        alert('Page query parameter missing: exampleName');
                    }
                    (new ajaxObject(exampleName + '/description.html',
                            function(responseText, responseStatus) {
                                document.getElementById('description').innerHTML = responseText;
                            })).update();

                    var SandBox = new function() {
                        var scene;
                        var editor;

                        var evalScene = function(sceneJs) {
                            var output = document.getElementById('output');
                            output.innerHTML = '<canvas id="exampleCanvas" style="border: solid 1px; background:black" width="360px" height="360px"/>';
                            try {
                                eval(sceneJs);
                            } catch (e) {
                                output.innerHTML = '<div class="sandbox-error">Error in scene - ' + e + '</div>';
                            }
                        };

                        this.load = function() {
                            var textarea = document.getElementById('code');
                            (new ajaxObject(exampleName + '/scene.js',
                                    function(responseText, responseStatus) {
                                        scene = responseText;
                                        textarea.value = responseText;
                                        editor = new MirrorFrame(CodeMirror.replace(textarea), {
                                            height: "1000px",
                                            width: "590px",
                                            content: textarea.value,
                                            parserfile: ["tokenizejavascript.js", "parsejavascript.js"],
                                            stylesheet: "css/codemirror/jscolors.css",
                                            path: "js/codemirror/",
                                            autoMatchParens: true
                                        });
                                        evalScene(responseText);
                                    })).update();
                        };

                        this.reset = function() {
                            editor.mirror.setCode(scene);
                        };

                        this.execute = function() {
                            evalScene(editor.mirror.getCode());
                        };

                        this.reindent = function() {
                            editor.mirror.reindent();
                        };
                    };

                    SandBox.load();
                </script>
            </div>
        </div>
        <div id="footer">
            <p><span>&copy; 2009, <a href="http://www.xeolabs.com">XeoLabs</a></span></p>
        </div>
    </div>
</div>

<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try {
        var pageTracker = _gat._getTracker("UA-8036359-2");
        pageTracker._trackPageview();
    } catch(err) {
    }</script>
</body>

</html>
