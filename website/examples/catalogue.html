<div id="page">
    <div id="content">
        <h1>Examples</h1>

        <div id="catalogue">

            <div id="index"></div>
        </div>
    </div>
</div>
<script type="text/javascript">
    function createCatalogue(cat) {

        /* Create catalogue
         */
        var html = [];
        for (var i = 0; i < cat.categories.length; i++) {
            var category = cat.categories[i];
            html.push('<div class="catalogue-category">');
            html.push('<div class="catalogue-category-title">');
            html.push(category.title);
            html.push('</div>');
            if (category.entries) {
                for (var j = 0; j < category.entries.length; j++) {
                    var entry = category.entries[j];
                    html.push('<div class="catalogue-entry">');
                    html.push('<div class="catalogue-entry-text">');
                    html.push('<a id="catalogue-entry-link' + i + '-' + j + '">');
                    html.push(entry.title);
                    html.push("</a>");
                    html.push("</div>");
                    html.push("</div>");
                }
            }
            html.push('</div>');
        }
        $("#catalogue").html(html.join(""));


        /* Attach handler to entries
         */

        var openEntry = function(id) {
            $("#example_id").text(id);
            $("#playroom-inner").load("./examples/example.html");
        };

        for (var i = 0; i < cat.categories.length; i++) {
            var category = cat.categories[i];
            if (category.entries) {
                for (var j = 0; j < category.entries.length; j++) {
                    var entry = category.entries[j];
                    $("#catalogue-entry-link" + i + "-" + j).click(
                            (function(id) {   //  delegate
                                return function() {
                                    openEntry(id);
                                };
                            })(entry.id));
                }
            }
        }
    }

    (new ajaxObject("./examples/repository/catalogue.js",
            function(responseText, responseStatus) {
                var catalogue = null;
                eval("catalogue=" + responseText);
                createCatalogue(catalogue);
            })).update();
</script>
